function freqAnalyser(){window.requestAnimationFrame(freqAnalyser);var e,a,n,o,t=10,i=new Uint8Array(12);analyser.getByteFrequencyData(i),analyser||$("#vis").html(i[0]),canvasCtx.clearRect(0,0,canvas.width,canvas.height);var s=canvasCtx.createLinearGradient(0,canvas.height,0,0);s.addColorStop(0,"#4caf50"),s.addColorStop(.5,"#cddc39"),s.addColorStop(.98,"#f44336"),canvasCtx.fillStyle=s;for(var r=Math.floor(i.length/t),d=0;d<t;d++){e=0;for(var l=0;l<r;l++)e+=i[d*r+l];a=e/r,n=canvas.width/t,o=a/256*canvas.height,canvasCtx.fillRect(d*n,canvas.height,n/1.1,-o)}}function respondCanvas(){canvas.width=$("#bottom").width(),canvas.height=$("#controlAudio").height()-72}window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;try{this.audioContext=new AudioContext}catch(e){this._updateInfo("!Your browser does not support AudioContext",!1)}var audioElement=new Audio;audioElement.controls=!1,audioElement.autoplay=!1,audioElement.crossOrigin="anonymous",audioElement.id="a",audioElement.src="http://192.30.164.78:8000/bahia",$("#audio-visual")[0].appendChild(audioElement),$("#pause").click(function(){audioElement.pause(),$("#pause").addClass("btn-warning"),$("#play").removeClass("btn-success"),$("#bar").removeClass("active")});var play=function(){audioElement.play(),$("#pause").removeClass("btn-warning"),$("#bar").addClass("active"),$("#play").addClass("btn-success")};$("#play").click(function(){play()}),play(),audioElement.addEventListener("loadstart",function(){$("#bar").addClass("progress-bar-info").removeClass("progress-bar-danger").removeClass("progress-bar-warning").addClass("active"),$("#play").removeClass("btn-danger").removeClass("btn-success"),$("#pause").removeClass("btn-danger")}),audioElement.addEventListener("canplay",function(){$("#bar").addClass("progress-bar-success").removeClass("progress-bar-info").removeClass("progress-bar-danger").removeClass("progress-bar-warning"),$("#play").removeClass("btn-danger").removeClass("btn-success"),$("#pause").removeClass("btn-danger"),audioElement.paused||($("#play").addClass("btn-success"),$("#pause").removeClass("btn-warning"))});var canvas=$("#c")[0],canvasCtx=canvas.getContext("2d"),context=new(window.AudioContext||window.webkitAudioContext),analyser=context.createAnalyser();analyser.fftSize=256,analyser.smoothingTimeConstant=.2,analyser.minDecibels=-98,analyser.maxDecibels=-16,$("document").ready(function(){var e=context.createMediaElementSource(audioElement);e.connect(analyser),analyser.connect(context.destination),freqAnalyser(),respondCanvas(),$(window).resize(respondCanvas),$("#headerLiveTrackHolder").airtimeLiveTrackInfo({sourceDomain:"http://radio.riocast.net",text:{onAirNow:"AL AIRE",offline:"Offline",current:"Reproduciéndo ahora",next:"Próximamente"},updatePeriod:20}),$("#onAirToday").airtimeShowSchedule({sourceDomain:"http://radio.riocast.net",updatePeriod:20,showLimit:20}),window.audioContext||window.webkitAudioContext||$("#vis").hide()});