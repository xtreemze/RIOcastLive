window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;try{this.audioContext=new AudioContext()}catch(e){}const audioElement=new Audio();const smartSource=function(){if(audioElement.canPlayType("audio/mpeg")){audioElement.setAttribute("src","http://192.30.164.78:8000/rio");$("#mp3").addClass("active")}else{if(audioElement.canPlayType("audio/ogg")){audioElement.setAttribute("src","http://192.30.164.78:8000/airtime");$("#ogg").addClass("active")}}};smartSource();audioElement.controls=false;audioElement.autoplay=false;audioElement.crossOrigin="anonymous";audioElement.id="a";$("#audio-visual")[0].appendChild(audioElement);$("#pause").click(function(){audioElement.pause();$("#pause").addClass("btn-warning");$("#play").removeClass("btn-success");$("#bar").removeClass("active")});$("#reconnect").click(function(){$("#bar").removeClass("active").removeClass("progress-bar-success").addClass("progress-bar-warning");$("#pause").removeClass("btn-warning");smartSource();checkSource();$("#play").removeClass("btn-success");play()});const play=function(){audioElement.play();$("#pause").removeClass("btn-warning");$("#bar").addClass("active");$("#play").addClass("btn-success")};$("#play").click(function(){play()});play();audioElement.addEventListener("stalled",function(){redZone()});audioElement.addEventListener("loadstart",function(){$("#bar").addClass("progress-bar-info").removeClass("progress-bar-danger").removeClass("progress-bar-warning").addClass("active");$("#play").removeClass("btn-danger").removeClass("btn-success");$("#pause").removeClass("btn-danger")});audioElement.addEventListener("canplay",function(){$("#bar").addClass("progress-bar-success").removeClass("progress-bar-info").removeClass("progress-bar-danger").removeClass("progress-bar-warning");$("#play").removeClass("btn-danger").removeClass("btn-success");$("#pause").removeClass("btn-danger");if(audioElement.paused){}else{$("#play").addClass("btn-success");$("#pause").removeClass("btn-warning")}});audioElement.addEventListener("abort",function(){redZone()});const redZone=function(){};const canvas=$("#c")[0];const canvasCtx=canvas.getContext("2d");const context=new (window.AudioContext||window.webkitAudioContext)();const analyser=context.createAnalyser();analyser.fftSize=256;analyser.smoothingTimeConstant=0.5;function freqAnalyser(){var h;var b;var l;var m;var f;var g;var c;var k;var a;const d=24;window.requestAnimationFrame(freqAnalyser);f=new Uint8Array(128);analyser.getByteFrequencyData(f);if(!analyser){$("#vis").html(f[0])}canvasCtx.clearRect(0,0,canvas.width,canvas.height);k=canvasCtx.createLinearGradient(0,canvas.height,0,0);k.addColorStop(0,"#28B62C");k.addColorStop(0.8,"#F5D802");k.addColorStop(1,"red");canvasCtx.fillStyle=k;a=Math.floor((f.length-40)/d);for(g=0;g<d;g++){h=0;for(c=0;c<a;c++){h+=f[(g*a)+c]}b=h/a;l=canvas.width/d;m=(b/256)*canvas.height;canvasCtx.fillRect(g*l,canvas.height,l/1.1,-m)}}const checkSource=function(){if($("#a")[0].src==="http://192.30.164.78:8000/rio"){$("#mp3").addClass("active");$("#ogg").removeClass("active")}else{if($("#a")[0].src==="http://192.30.164.78:8000/airtime"){$("#mp3").removeClass("active");$("#ogg").addClass("active")}}};function respondCanvas(){canvas.width=$("#bottom").width();canvas.height=$("#controlAudio").height()-72}$("document").ready(function(){var a=context.createMediaElementSource(audioElement);a.connect(analyser);analyser.connect(context.destination);freqAnalyser();respondCanvas();$(window).resize(respondCanvas);$("#headerLiveTrackHolder").airtimeLiveTrackInfo({sourceDomain:"http://radio.riocast.net",text:{onAirNow:"AL AIRE",offline:"Offline",current:"Reproduciéndo ahora",next:"Próximamente",},updatePeriod:20,});$("#onAirToday").airtimeShowSchedule({sourceDomain:"http://radio.riocast.net",updatePeriod:20,showLimit:20,});if(window.audioContext||window.webkitAudioContext){}else{$("#vis").hide()}});