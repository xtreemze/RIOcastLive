var AIRTIME_API_VERSION="1.1";(function(a){a.fn.airtimeShowSchedule=function(b){var c={updatePeriod:20,sourceDomain:"http://radio.riocast.net/",text:{onAirToday:"Programa de hoy"},showLimit:20};b=a.extend(true,c,b);b.sourceDomain=addEndingBackslash(b.sourceDomain);return this.each(function(){var g=a(this);var f;h();function e(){var n=f.getCurrentShow();var m=f.getNextShows();var j=n.length==0?m:n.concat(m);tableString="";tableString+="<h3><span class='label label-primary col-xs-12'>Honduras UTC-06:00</span></h3> <table class='table table-bordered'><tbody><th>Hora</th><th class='programa'>Programa</th>";for(var l=0;l<j.length;l++){tableString+="<tr><td class='time'>"+j[l].getRange()+"</td>";var k=j[l].getURL();if(k.length>0){tableString+="<td><a href='"+j[l].getURL()+"'>"+j[l].getName()+"</a></td></tr>"}else{tableString+="<td>"+j[l].getName()+"</td></tr>"}}tableString+="</tbody></table>";g.empty();g.append(tableString)}function i(j){checkWidgetVersion(j);f=new ScheduleData(j);e()}function d(j,l,k){}function h(){a.ajax({url:b.sourceDomain+"api/live-info/",data:{type:"endofday",limit:b.showLimit},dataType:"jsonp",success:function(j){i(j)},error:d});setTimeout(h,b.updatePeriod*1000)}})}})(jQuery);(function(a){a.fn.airtimeLiveTrackInfo=function(b){var c={updatePeriod:20,sourceDomain:"http://radio.riocast.net/",text:{onAirNow:"On Air Now",offline:"Offline",current:"Current",next:"Next"}};b=a.extend(true,c,b);b.sourceDomain=addEndingBackslash(b.sourceDomain);return this.each(function(){var g=a(this);var f=null;h();setInterval(e,1000);function e(){if(f==null){return}var q=f.getCurrentShow();var p=f.getNextShows();var o=b.text.offline;var m="";var n="";var k="";var l="";var j="";if(q.length>0){o=b.text.onAirNow;m=q[0].getName();n=f.getShowTimeElapsed(q[0]);k=f.getShowTimeRemaining(q[0])}if(p.length>0){l=p[0].getName();j=p[0].getRange()}g.empty();g.append("<h3><span class='label label-success col-xs-12 col-md-4'>"+o+" &gt;&gt;</span></h3><h3><span class='label label-primary col-xs-12 col-md-8'>"+m+"</span></h3>");g.append("<div class=''><table class='table table-bordered'><tbody><th>Tiempo Elapsado</th><th>Tiempo Restante</th><tr><td align='center'><span class='time1'>"+n+"</span></td><td align='center'><span class='time1 remainingTime'>"+k+"</span></td></tr></tbody></table></div><div class=''><ul class='widget now-playing-bar list-group'><li class='current track-metadata list-group-item active'>"+b.text.current+":</br>"+f.currentTrack.getTitle()+"</li><li class='next track-metadata list-group-item'>"+b.text.next+":</br>"+f.nextTrack.getTitle()+"</span></li></ul></div>")}function i(j){checkWidgetVersion(j);f=new ScheduleData(j)}function d(j,l,k){}function h(){a.ajax({url:b.sourceDomain+"api/live-info/",data:{type:"interval",limit:"5"},dataType:"jsonp",success:function(j){i(j)},error:d});setTimeout(h,b.updatePeriod*1000)}})}})(jQuery);function addEndingBackslash(a){if(a.charAt(a.length-1)!="/"){return a+"/"}else{return a}}function ScheduleData(c){this.data=c;this.estimatedSchedulePosixTime;this.currentShow=new Array();if(c.currentShow!=undefined){for(var b=0;b<c.currentShow.length;b++){this.currentShow[b]=new Show(c.currentShow[b])}}this.nextShows=new Array();if(c.nextShow!=undefined){for(var b=0;b<c.nextShow.length;b++){this.nextShows[b]=new Show(c.nextShow[b])}}this.currentTrack=new AudioTrack(c.current);this.nextTrack=new AudioTrack(c.next);this.schedulePosixTime=convertDateToPosixTime(c.schedulerTime);var a=new Date();this.localRemoteTimeOffset=a.getTime()-this.schedulePosixTime}ScheduleData.prototype.secondsTimer=function(){var a=new Date();this.estimatedSchedulePosixTime=a.getTime()-this.localRemoteTimeOffset};ScheduleData.prototype.getCurrentShow=function(){return this.currentShow};ScheduleData.prototype.getNextShows=function(){return this.nextShows};ScheduleData.prototype.getShowTimeElapsed=function(a){this.secondsTimer();var b=convertDateToPosixTime(a.getStartTimestamp());return convertToHHMMSS(this.estimatedSchedulePosixTime-b)};ScheduleData.prototype.getShowTimeRemaining=function(b){this.secondsTimer();var a=convertDateToPosixTime(b.getEndTimestamp());return convertToHHMMSS(a-this.estimatedSchedulePosixTime)};function Show(a){this.showData=a}Show.prototype.getURL=function(){return this.showData.url};Show.prototype.getName=function(){return this.showData.name};Show.prototype.getRange=function(){return getTime(this.showData.start_timestamp)+" - "+getTime(this.showData.end_timestamp)};Show.prototype.getStartTimestamp=function(){return this.showData.start_timestamp};Show.prototype.getEndTimestamp=function(){return this.showData.end_timestamp};function AudioTrack(a){this.trackData=a}AudioTrack.prototype.getTitle=function(){if(this.trackData===null){return""}return this.trackData.name};function getTime(a){var b=a.split(" ")[1].split(":");return b[0]+":"+b[1]}function convertToHHMMSS(e){var c=parseInt(e);var a=parseInt(c/3600000);c-=3600000*a;var b=parseInt(c/60000);c-=60000*b;var d=parseInt(c/1000);a=a.toString();b=b.toString();d=d.toString();if(a.length==1){a="0"+a}if(b.length==1){b="0"+b}if(d.length==1){d="0"+d}if(a=="00"){return b+":"+d}else{return a+":"+b+":"+d}}function convertDateToPosixTime(l){var h=l.split(" ");var c=h[0].split("-");var b=h[1].split(":");var i=c[0];var g=c[1];var j=c[2];var e=b[0];var d=b[1];var f=0;var a=0;if(b[2].indexOf(".")!=-1){var k=b[2].split(".");f=k[0];a=k[1]}else{f=b[2]}return Date.UTC(i,g-1,j,e,d,f,a)}function checkWidgetVersion(b){var a=b.AIRTIME_API_VERSION;if(undefined===a||a>AIRTIME_API_VERSION){throw"The version of widgets you are using is out of date with the Airtime installation, please update your widgets javascript file. (Airtime widget API version is "+a+", this widget's API version is "+AIRTIME_API_VERSION+")"}else{if(a<AIRTIME_API_VERSION){throw"The Airtime server has a different version than this widget supports. Please get the correct widget version for your Airtime installation. (Airtime widget API version is "+a+", this widget's API version is "+AIRTIME_API_VERSION+")"}}};